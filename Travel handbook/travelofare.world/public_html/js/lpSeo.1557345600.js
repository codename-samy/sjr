"use strict";var timeTester=!1;(appjf=appjf||{}).calendarFares=[],appjf.calendarFaresObj={},$("li[data-country]").click(function(){appjf.calendarFaresObj={}}),appjf.DatePicker={events:function(){timeTester&&console.log("events :",moment().milliseconds());var m=this;$(".date-picker").on("click",function(a){var p=$(this).attr("id"),d=$("#"+p),c=d.data("picker-range"),f=!1;if(appjf.m_calendar_close($(this)),f=window.innerWidth<680,$(window).resize(function(){f=window.innerWidth<680}),m.createCalendarDisplay(p,f),m.generateCalendar(p),$("[data-date-store]").on("click",function(){if($(".roundTripSameDate").removeClass("roundTripSameDate"),""!==$(this).data("date-store")){var a=$("[data-date-store]");if(!$(this).hasClass("blocked")){var t=parseInt($(this).data("date-store"));""!==$(this).data("startDate")&&(!1===c&&(d.attr("value",moment(t).format("MMM D YYYY")),d.data("startDate",t),a.removeClass("activeDate"),$(this).addClass("activeDate"),$("td").removeClass("singleDate"),$(this).addClass("singleDate"),m.bind_dates(p)),!0===c&&(d.data("startDate")&&!d.data("endDate")?d.data("startDate")>t?(d.data("startDate",t),a.removeClass("activeDate"),$("td").removeClass("inDatesRange"),a.removeClass("startDate"),$(this).addClass("activeDate"),$(this).addClass("startDate")):(d.data("endDate",t),$(this).addClass("activeDate"),$("td").removeClass("endDate"),$(this).addClass("endDate"),d.attr("value",moment(parseInt(d.data("startDate"))).format("MMM D YYYY")+" - "+moment(parseInt(d.data("endDate"))).format("MMM D YYYY")),appjf.DatePicker.generateRangeDates(p)):d.data("startDate")||d.data("endDate")?d.data("startDate")&&d.data("endDate")&&(d.data("startDate",t),d.data("endDate",""),a.removeClass("activeDate"),a.removeClass("startDate"),a.removeClass("endDate"),a.removeClass("inDatesRange"),$(this).addClass("activeDate"),$(this).addClass("startDate")):(d.data("startDate",t),a.removeClass("activeDate"),a.removeClass("startDate"),$("td").removeClass("inDatesRange"),$(this).addClass("activeDate"),$(this).addClass("startDate")),m.bind_dates(p)),$("#"+p).removeClass("error"),$('[data-target-input_id="'+p+'"]').removeClass("error"))}var e=d.data("startDate"),o=d.data("endDate");!1===f&&("round-trip"===appjf.formData.flightTypes?e&&o&&appjf.m_calendar_close($(this)):e&&!o&&appjf.m_calendar_close($(this)));var n=[],i=$("#flight-selection-v2 .date-picker");$.each(i,function(){$(this).data("startDate")&&n.push($(this).data("startDate"))});var s=Math.max.apply(Math,n),r=n.indexOf(s)+1,l=n.splice(r);$.each(l,function(a,t){var e=function(a){var t="";return $.each(i,function(){$(this).data("startDate")===a&&(t=$(this))}),t}(t);e.attr("value",""),e.data("startDate",""),appjf.removeFromSelectors(e.attr("id"))}),"multiple-city"!==appjf.formData.flightTypes&&!1===f&&("round-trip"===appjf.formData.flightTypes&&e&&o||"round-trip"!==appjf.formData.flightTypes&&e&&!o)&&setTimeout(function(){$("#next-btn").click()},500)}"round-trip"===appjf.formData.flightTypes&&e&&o&&e===o&&$(this).addClass("roundTripSameDate"),"multiple-city"===appjf.formData.flightTypes&&675<window.innerWidth&&m.multiple_dates_sequence_validation()}),appjf.DatePicker.ifMobile(!1,p,m),$(document).mouseup(function(a){var t=$(".m-calendarDisplay");a.target.id===t.attr("id")||t.has(a.target).length||t.remove()}),!0===f){var t,e=d.data("startDate");if(e)t=$("#"+moment(parseInt(e)).format("MM-YYYY"));else if(appjf.storage.getItem(p)){var o=$.parseJSON(appjf.storage.getItem(p)).startDate;t=$("#"+moment(o).format("MM-YYYY"))}else{var n;$.each($(".date-day-cell.blocked"),function(){$(this).data("date-store")&&(n=$(this).data("date-store"))}),t=$("#"+moment(n).format("MM-YYYY"))}$(".m-calendarDisplay").animate({scrollTop:$(t).offset().top-10},"fast")}if(!1===f){var i=d.position().top;d.next(".m-calendarDisplay").css("top",i+46)}m.get_calendar_fares()})},createCalendarDisplay:function(a,t){timeTester&&console.log("createCalendarDisplay :",moment().milliseconds()),$(".m-calendarDisplay").remove(),!1===t?$("#"+a).after('<div class="m-calendarDisplay" data-input-target="'+a+'"></div>'):($("body").prepend('<div class="m-calendarDisplay" data-input-target="'+a+'"><div class="mob-calendar-controllers"><button id="calendar-mob-close">Cancel</button><button id="calendar-mob-apply">Apply</button></div></div>'),$(".wrapper").addClass("fixed"))},generateRangeDates:function(a){timeTester&&console.log("generateRangeDates :",moment().milliseconds());var t=$("#"+a),e=parseInt(t.data("startDate")),o=parseInt(t.data("endDate")),n=null;if("multiple-city"===appjf.formData.flightTypes&&(n=$("#daterange"+(parseInt(t.attr("id").substr(-1))-1))),null!==n){var i=n.data("startDate");$.each($(".month-table tbody .date-day-cell"),function(){$(this).data("date-store")<i&&$(this).addClass("blocked")})}!0===t.data("picker-range")?$.each($(".date-day-cell"),function(a,t){$(this).data("date-store")&&($(this).data("date-store")>e&&$(this).data("date-store")<o&&e&&o?$(this).addClass("inDatesRange"):$(this).data("date-store")===e?$(this).addClass("startDate"):$(this).data("date-store")===o&&$(this).addClass("endDate"))}):$.each($(".date-day-cell"),function(a,t){$(this).data("date-store")&&$(this).data("date-store")===e&&$(this).addClass("singleDate")})},generateCalendar:function(a){timeTester&&console.log("generateCalendar :",moment().milliseconds());for(var t=0;t<13;t++){var e,o;o=0<t?(e=moment().add(t,"months").format("MMMM"),moment().add(t,"months").format("YYYY")):(e=moment().format("MMMM"),moment().format("YYYY")),$(".m-calendarDisplay").append(this.template(this.getMonths(e,o),e,o,a))}appjf.DatePicker.generateRangeDates(a),appjf.getObjOutOfSelectors("daterange")&&"round-trip"===appjf.formData.flightTypes&&moment(appjf.getObjOutOfSelectors("daterange").date.startDate).format("DD MMM YYYY")===moment(appjf.getObjOutOfSelectors("daterange").date.endDate).format("DD MMM YYYY")&&$('[data-date-store="'+$("#daterange").data("endDate")+'"]').addClass("roundTripSameDate")},getMonths:function(a,t){timeTester&&console.log("getMonths :",moment().milliseconds());for(var e=[],o=moment(t+"-"+a,"YYYY-MMM"),n=moment(o).add(1,"month");o.isBefore(n);o.add(1,"day"))e.push(o.format("DD-MM-YYYY"));return e},template:function(n,a,t,c){timeTester&&console.log("template :",moment().milliseconds());var f=0,m=0,u=[],e=n[0].split("-"),o=e[2]+"-"+e[1]+"-"+e[0];function i(a,t){if("append"===t)for(var e=0;e<a;e++)n.push("");if("prepend"===t)for(var o=0;o<a;o++)n.unshift("")}switch(moment(o).format("dd")){case"Su":i(6,"append");break;case"Mo":i(5,"append"),i(1,"prepend");break;case"Tu":i(4,"append"),i(2,"prepend");break;case"We":i(3,"append"),i(3,"prepend");break;case"Th":i(2,"append"),i(4,"prepend");break;case"Fr":i(1,"append"),i(5,"prepend");break;case"Sa":i(6,"prepend")}return u.push('<table data-month="'+moment().month(a).format("M")+'" data-year="'+t+'" class="month-table" id="'+moment().month(a).format("MM")+"-"+t+'">','<thead><tr class="c-month-n-year"><th colspan="7">'+a+" - "+t+"</th></tr>"),u.push('<tr class="days-abbreviations"><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr></thead>'),$.each(n,function(a,t){var e=moment(t,"DD-MM-YYYY");f++;var o=e,n=e.format("D");""===t&&(n=o=""),1===f&&(u.push("<tr>"),m++);var i=$("#"+c);if(i.data("startDate"))i.data("startDate")===o?u.push('<td class="date-day-cell activeDate" data-date-store="'+o+'">'+n+"</td>"):i.data("endDate")===o&&i.data("endDate")?u.push('<td class="date-day-cell activeDate" data-date-store="'+o+'">'+n+"</td>"):moment(o)<moment().subtract(1,"day")?u.push('<td class="date-day-cell blocked" data-td-day="'+moment(o).format("DD")+'" data-td-month="'+moment(o).format("MM")+'" data-td-year="'+moment(o).format("YYYY")+'" data-date-store="'+o+'">'+n+"</td>"):u.push('<td class="date-day-cell" data-date-store="'+o+'">'+n+"</td>");else if(($.parseJSON(appjf.storage.getItem("daterange"))||$.parseJSON(appjf.storage.getItem("daterange0")))&&"multiple-city"!==appjf.formData.flightTypes){var s=$.parseJSON(appjf.storage.getItem(c));if(s)var r=parseInt(moment(s.startDate).format("X")),l=parseInt(moment(s.endDate).format("X"));var p=moment(o).format("X"),d="date-day-cell";moment(o)<moment().subtract(1,"day")?d="date-day-cell blocked":parseInt(p)===r?d="round-trip"===appjf.formData.flightTypes?"date-day-cell startDate":"date-day-cell singleDate":parseInt(p)===l?d="date-day-cell endDate":parseInt(p)>r&&parseInt(p)<l&&(d="date-day-cell inDatesRange"),isNaN(parseInt(p))?u.push('<td class="'+d+'" data-date-store=""></td>'):u.push('<td class="'+d+'" data-date-store="'+o+'">'+n+"</td>")}else moment(o)<moment().subtract(1,"day")?u.push('<td class="date-day-cell blocked" data-td-day="'+moment(o).format("DD")+'" data-td-month="'+moment(o).format("MM")+'" data-td-year="'+moment(o).format("YYYY")+'" data-date-store="'+o+'">'+n+"</td>"):u.push('<td class="date-day-cell" data-td-day="'+moment(o).format("DD")+'" data-td-month="'+moment(o).format("MM")+'" data-td-year="'+moment(o).format("YYYY")+'" data-date-store="'+o+'">'+n+"</td>");7===f&&(u.push("</tr>"),f=0)}),m<6&&u.push('<tr><td colspan="7"></td></tr>'),u.push("</table>"),u.join("")},ifMobile:function(a,r,t){if(timeTester&&console.log("ifMobile :",moment().milliseconds()),!a){var e=function(a){var t=$(".month-table");return t.first().attr("id")===a?"stop":t.last().attr("id")===a?"stop":void 0};$.each($(".month-table"),function(a,t){var e,o=$(this).attr("id");if(!1===(appjf.getObjOutOfSelectors(r)?(e=moment(appjf.getObjOutOfSelectors(r).date.startDate).format("MM-YYYY"),!0):appjf.storage.getItem(r)?(e=moment($.parseJSON(appjf.storage.getItem(r)).startDate).format("MM-YYYY"),!0):(e=moment().format("MM-YYYY"),!1))){var n;$(".month-table").removeClass("visible-desktop"),$.each($(".date-day-cell.blocked"),function(){$(this).data("date-store")&&(n=$(this).data("date-store"))});var i=$("#"+moment(n).format("MM-YYYY")),s=$(".month-table").last();i.attr("id")!==s.attr("id")?(i.addClass("visible-desktop"),i.next().filter(".month-table").addClass("visible-desktop")):(s.filter(".month-table").addClass("visible-desktop"),s.prev().filter(".month-table").addClass("visible-desktop"))}if(o===e){s=$(".month-table").last();$(this).attr("id")!==s.attr("id")?($(this).addClass("visible-desktop"),$(this).next().filter(".month-table").addClass("visible-desktop")):(s.filter(".month-table").addClass("visible-desktop"),s.prev().filter(".month-table").addClass("visible-desktop"))}}),$(".m-calendarDisplay").prepend('<div class="calendarControlers"><i class="glyphicon glyphicon-menu-left prevMonth" aria-hidden="true"></i><i class="glyphicon glyphicon-menu-right nextMonth" aria-hidden="true"></i></div>'),$(".nextMonth").on("click",function(){if("stop"!==e($(".visible-desktop:eq(1)").attr("id"))){var a=$(".visible-desktop:eq(1)");a.next().filter(".month-table").addClass("visible-desktop"),a.prev().filter(".month-table").removeClass("visible-desktop")}t.get_calendar_fares()}),$(".prevMonth").on("click",function(){if("stop"!==e($(".visible-desktop").first().attr("id"))){var a=$(".visible-desktop").first();a.next().filter(".month-table").removeClass("visible-desktop"),a.prev().filter(".month-table").addClass("visible-desktop")}t.get_calendar_fares()}),this.mobile_calendar_buttons(a,r)}},mobile_calendar_buttons:function(a,t){timeTester&&console.log("mobile_calendar_buttons :",moment().milliseconds());var e,o,n,i=this,s=$("#"+t);a||($("#calendar-mob-apply").on("click",function(){$.each($(".date-day-cell"),function(){$(this).hasClass("startDate")&&(e=$(this).data("date-store")),$(this).hasClass("endDate")&&(o=$(this).data("date-store")),$(this).hasClass("singleDate")&&(n=$(this).data("date-store"))}),e&&o?(appjf.m_calendar_close($(this)),appjf.changeSelectorsDaterangeData(t,moment(e),moment(o)),s.attr("value",moment(e).format("MMM D YYYY")+" - "+moment(o).format("MMM D YYYY"))):n&&(appjf.m_calendar_close($(this)),appjf.changeSelectorsDaterangeData(t,moment(n)),s.attr("value",moment(n).format("MMM D YYYY")),i.multiple_dates_sequence_validation()),i.assignDates(),setTimeout(function(){"multiple-city"!==appjf.formData.flightTypes?(setTimeout(function(){$("#next-btn").click()},500),appjf.scrollToAnchor("search-flights")):(appjf.scrollToElem(s,100),appjf.flasher(s))},100),$(".wrapper").removeClass("fixed"),i.slickSliderRefresher()}),$("#calendar-mob-close").on("click",function(){appjf.m_calendar_close($(this)),"multiple-city"!==appjf.formData.flightTypes?appjf.scrollToAnchor("search-flights"):(appjf.scrollToElem(s,100),s.toggleClass("flasher"),setTimeout(function(){s.toggleClass("flasher")},750)),$.each(appjf.formData.lastSelectedDates,function(a,t){if("daterange"===a){var e=$("#"+a);appjf.changeSelectorsDaterangeData(a,t.startDate,t.endDate),e.data("startDate",appjf.simplifyDate(t.startDate)).data("endDate",appjf.simplifyDate(t.endDate)),e.attr("value",moment(parseInt(e.data("startDate"))).format("MMM D YYYY")+" - "+moment(parseInt(e.data("endDate"))).format("MMM D YYYY"))}else{if(appjf.getObjOutOfSelectors(a))appjf.changeSelectorsDaterangeData(a,t.startDate,null),(e=$("#"+a)).data("startDate",appjf.simplifyDate(t.startDate)),e.attr("value",moment(parseInt(e.data("startDate"))).format("MMM D YYYY"))}}),$(".wrapper").removeClass("fixed"),i.slickSliderRefresher()}))},apply_if_localStored:function(){for(var a in timeTester&&console.log("apply_if_localStored :",moment().milliseconds()),this.check_if_date_is_not_late=function(a){return moment().format("X")<moment(a).format("X")},this.apply_to_calendar=function(a,t,e){var o=$("#"+a);"daterange"===a?(o.data("startDate",appjf.simplifyDate(t)).data("endDate",appjf.simplifyDate(e)),appjf.changeSelectorsDaterangeData(a,t,e),o.attr("value",t.format("MMM D YYYY")+" - "+e.format("MMM D YYYY"))):(o.data("startDate",appjf.simplifyDate(t)),appjf.changeSelectorsDaterangeData(a,t),o.attr("value",t.format("MMM D YYYY")))},this.prefill=function(){var a=moment().add("1","day"),t=moment().add("4","day");this.apply_to_calendar("daterange",a,t,null,this),this.apply_to_calendar("daterange0",a,null,null,this),$.each(["daterange","daterange0"],function(a,t){})},localStorage)if(-1<a.indexOf("daterange")&&"undefined"!==a){var t=JSON.parse(localStorage.getItem(a));if($("#"+a).is(":visible")&&t.startDate&&t.endDate&&!0===this.check_if_date_is_not_late(t.startDate)){var e=moment(t.startDate),o=moment(t.endDate);this.apply_to_calendar("daterange",e,o,null,this),this.apply_to_calendar("daterange0",e,null,null,this)}}localStorage.getItem("daterange0")||localStorage.getItem("daterange")?t&&!1===this.check_if_date_is_not_late(t.startDate)&&(localStorage.clear(),this.prefill()):this.prefill()},multiple_dates_sequence_validation:function(a,t){timeTester&&console.log("multiple_dates_sequence_validation :",moment().milliseconds());var r=this;setTimeout(function(){var i=0,s="daterange0",a=[s];$.each($(".seg-row[data-row_segment_assignment]"),function(){a.push("daterange"+$(this).data("row_segment_assignment"))}),$.each(a,function(a,t){var e=$("#"+t);if(e.data("startDate")){var o=parseInt(e.data("startDate"));if(i<o&&(i=o,s=t),o<i){e.data("startDate","").attr("value",""),appjf.removeFromSelectors(t),appjf.storage.removeObject(t),r.input_replacer_initial_state(t);var n=$('.date-input-mobile[data-mob_input_for="'+t+'"]');$("strong",n).html("When"),$("small",n).html("Select Date")}}})},100)},input_replacer_initial_state:function(a){timeTester&&console.log("input_replacer_initial_state :",moment().milliseconds());var t=$('[data-target-input_id="'+a+'"]');$("large",t).html("When"),$("small",t).html("Select Date")},get_calendar_fares:function(a){if(timeTester&&console.log("get_calendar_fares :",moment().milliseconds()),appjf.getObjOutOfSelectors("from")&&appjf.getObjOutOfSelectors("to")&&"round-trip"===appjf.formData.flightTypes){var s=function(a){var e,o,n=appjf.formData.tooltiptext_calendar;$.each(a,function(a,t){e=appjf.simplifyDate(moment(this.date)),o=$('.date-day-cell[data-date-store="'+e+'"]'),"dots"!==appjf.formData.pricepointcalendar&&"prices"!==appjf.formData.pricepointcalendar||(o.attr("data-toggle","tooltip"),o.attr("data-placement","top"),o.addClass("tooltip2"),"dots"===appjf.formData.pricepointcalendar?o.html(moment(this.date).format("D")+'<span class="fiber_manual_record_wrap"><i class="material-icons">fiber_manual_record</i></span>'):"prices"===appjf.formData.pricepointcalendar&&(n=moment(t.date).format("MMM DD")+" - "+moment(t.arrival_date).format("MMM DD"),o.html(moment(this.date).format("D")+'<span class="calendar_prices">$'+Math.ceil(t.best_fare)+"</span>")),o.append('<span class="tooltiptext">'+n+"</span>"),o.click(function(a){if($(a.target).hasClass("startDate")&&$(window).width()<661){var t=$(".tooltiptext",this);t.show(),setTimeout(function(){t.hide()},2500)}}))})};a||($(".date-day-cell .fiber_manual_record_wrap").remove(),$(".date-day-cell .calendar_prices").remove());var r={from:appjf.getObjOutOfSelectors("from").code,to:appjf.getObjOutOfSelectors("to").code},t=[];t[0]=$(".month-table.visible-desktop:first"),t[1]=$(".month-table.visible-desktop:last");var e=[{month:t[0].attr("data-month"),year:t[0].attr("data-year")},{month:t[1].attr("data-month"),year:t[1].attr("data-year")}];a&&(e=a),$.each(e,function(a,t){var e;e="ca"===window.data.country?"cad":"usd";var o=t.year+"_"+t.month+"_"+r.from+"_"+r.to+"_"+e,n={departure:r.from,destination:r.to,start_date:t.year+"-"+appjf.getMonthDateRange(t.year,t.month).start.format("MM")+"-"+appjf.getMonthDateRange(t.year,t.month).start.format("DD"),end_date:t.year+"-"+appjf.getMonthDateRange(t.year,t.month).start.format("MM")+"-"+appjf.getMonthDateRange(t.year,t.month).end.format("DD"),currency:e,route:r.from+"-"+r.to,month:t.month,year:t.year},i=o;appjf.calendarFaresObj[i]?s(appjf.calendarFaresObj[o][1].searches):$.getJSON("/landing-flights/ajax-get-calendar-fares-by-month?limit=15",n,function(a){appjf.calendarFaresObj[i]=[n,a],s(a.searches)})})}},mobileScroll:function(){timeTester&&console.log("mobileScroll :",moment().milliseconds());var e=this;if($(window).width()<661){var o=[];$(window).on("resize scroll",function(){$(".month-table").each(function(){var a=$(this).attr("id");if(-1===$.inArray(a,o)&&$(this).isInViewport()){var t={month:$(this).attr("data-month"),year:$(this).attr("data-year")};e.get_calendar_fares([t]),o.push(a)}})})}},applyPricePointCalendar:function(){timeTester&&console.log("applyPricePointCalendar :",moment().milliseconds()),$("body").attr("data-pricepointcalendar",appjf.formData.pricepointcalendar)},bind_dates:function(a){timeTester&&console.log("bind_dates :",moment().milliseconds());var t=$("#"+a);if("daterange"===a)appjf.changeSelectorsDaterangeData("daterange",moment(parseInt(t.data("startDate"))),moment(parseInt(t.data("endDate")))),appjf.changeSelectorsDaterangeData("daterange0",moment(parseInt(t.data("startDate")))),(e=$("#daterange0")).data("startDate",parseInt(t.data("startDate"))),e.attr("value",moment(parseInt(t.data("startDate"))).format("MMM D YYYY"));else if("daterange0"===a){var e;appjf.changeSelectorsDaterangeData("daterange",moment(parseInt(t.data("startDate"))),moment(parseInt(t.data("startDate"))).add(3,"days")),appjf.changeSelectorsDaterangeData("daterange0",moment(parseInt(t.data("startDate")))),(e=$("#daterange")).data("startDate",parseInt(t.data("startDate"))).data("endDate",parseInt(appjf.simplifyDate(moment(parseInt(t.data("startDate"))).add(3,"days")))),e.attr("value",moment(parseInt(t.data("startDate"))).format("MMM D YYYY")+" - "+moment(parseInt(t.data("startDate"))).add(3,"days").format("MMM D YYYY"))}else appjf.changeSelectorsDaterangeData(a,moment(parseInt(t.data("startDate"))))},slickSliderRefresher:function(){timeTester&&console.log("slickSliderRefresher :",moment().milliseconds()),$(".PopularDestinationsFromIp-slick")[0]&&$(".PopularDestinationsFromIp-slick")[0].slick.refresh(),$(".bestDealsOfTheDay-slick")[0]&&$(".bestDealsOfTheDay-slick")[0].slick.refresh()},assignDates:function(){var a=$(".date-input-mobile");$.each(a,function(){var a=$(this).data("mob_input_for");if(appjf.getObjOutOfSelectors(a)){var t=appjf.getObjOutOfSelectors(a).date;t.startDate&&t.endDate?($("strong",$(this)).html(t.startDate.format("DD MMM")+" - "+t.endDate.format("DD MMM")),$("small",$(this)).html(t.startDate.format("ddd")+" - "+t.endDate.format("ddd"))):($("strong",$(this)).html(t.startDate.format("DD MMM")),$("small",$(this)).html(t.startDate.format("ddd")))}})},invoking:function(){this.applyPricePointCalendar(),this.events(),this.apply_if_localStored(),this.mobileScroll(),this.assignDates();var a=this;$(".date-input-mobile").on("click",function(){$("#"+$(this).data("mob_input_for")).trigger("click"),a.assignDates()}),$(window).on("resize",function(){$(".seg-rows").removeClass("fixed"),a.assignDates()})}},(appjf=appjf||{}).ifMobile=!1,window.innerWidth<680?appjf.ifMobile=!0:appjf.ifMobile=!1,$(window).resize(function(){window.innerWidth<680?appjf.ifMobile=!0:appjf.ifMobile=!1}),appjf.cashAutoCompleterPrices=[],appjf.AutoCompleter={bootAutoComplete:function(n){var i=this,o=[],l=$(".m-awesome-deals-wrap");n.typeahead({highlight:"false"!==this.highlight,hint:!0,minLength:1},{source:function(t,a,e){if(void 0!==o[t])return $(n).trigger("ajax-response",[o[t]]),a(o[t]);$.get(window.data.dataBaseUrl+"airports/autocomplete?term="+t,function(a){0!==a.length&&(a.forEach(function(a){a.code=a.code.replace(/<[^>]+>/g,""),a.name=a.name.replace(/<[^>]+>/g,"")}),o[t]=a,e(a),$(n).trigger("ajax-response",[o[t]]))})},limit:10,display:function(a){return"("+a.code+") "+a.name},templates:{notFound:function(){},pending:function(){},suggestion:function(a){"dealsFrom"===n.attr("id")&&$("#dealsFrom").focus();var t="";!1!==appjf.formData.autoCompleterFlags&&(t='<img src="'+("http://"+window.location.hostname+"/images/assets/flags/4x3/")+a.country_code.toLowerCase()+'.svg" style="width:20px; margin-top:3px;">');switch(appjf.formData.autoCompleterPrices){case"true":return['<div role="option" class="tt-suggestion tt-selectable row">','<i style="float:left; margin-right:5px;">'+t+"</i>",'<div class="col-xs-8 col-sm-9 col-md-9 left-side">('+a.code+") "+a.name+"</div>",'<div class="col-xs-3 col-sm-2 col-md-2 right-side">','<span class="display-price-wrap" id="price-display-for-'+a.code+'"></span>',"</div>","</div>"].join(" ");default:return['<div role="option" class="tt-suggestion tt-selectable row">','<i style="float:left; margin-right:5px;">'+t+"</i>",'<div class="left-side">('+a.code+") "+a.name+"</div>","</div>"].join(" ")}}}}).on("typeahead:select typeahead:autocomplete",function(a,t){$(".lift-me-up").removeClass("lift-me-up"),n.typeahead("val",t.city+" ("+t.code+")"),n.trigger("call-to-close"),n.data("code",t.code),n.data("city",t.city),"from"===n.attr("data")&&$(".display-price-wrap").empty();var e={id:n.attr("id"),city:t.city,code:t.code};appjf.changeSelectorsAirportData(e.id,e.city,e.code),"multiple-city"!==appjf.formData.flightTypes&&setTimeout(function(){$("#next-btn").trigger("click")},500);for(var o=0;o<appjf.formData.errors.length;o++)if(appjf.formData.errors[o].id===n.attr("id")){appjf.formData.errors.splice(o,1);break}$("input").tooltip("hide"),$(".tooltiper").removeClass("open"),i.bindAirportData(n,t),setTimeout(function(){$(".input-clear").removeClass("show"),!0===appjf.ifMobile&&"multiple-city"===appjf.formData.flightTypes&&(appjf.scrollToElem(n,100),appjf.flasher(n))},100),n.removeClass("error"),$('[data-input_for="'+n.attr("id")+'"]').removeClass("error")}).on("typeahead:open",function(){var a=$(".tt-menu");"to"===$(this).attr("id")?(a.removeClass("position-change"),a.addClass("position-change")):a.removeClass("position-change");var t=$(".display-price-wrap");"round-trip"!==appjf.formData.flightTypes?t.hide():t.show();var e=$(this).closest("label").attr("for");$('div[data-for="'+e+'"]').addClass("lift-me-up"),$(".close-mob-input-display").show(),$(".tooltiper").removeClass("open"),$('[role="listbox"]').addClass("liftListToTop"),$(this).addClass("liftInputToTop"),$(".overlayBackground").show(),$(".m-main-nav-list").addClass("hideList"),$(".airport-back_arrow").addClass("showArrow"),$(this).val()&&$('.input-clear[data-clear-for="'+$(this).attr("id")+'"]').addClass("show"),$(".origin-airport",l).addClass("liftInputToTop"),$("#dealsFrom",l).val("");var o,n="",i="";if("dealsFrom"!==$(this).attr("id")){var s=$(".airports_list_header");if(s.addClass("open"),0<=$(this).attr("id").indexOf("from"))n="Where are you <strong>leaving from</strong>?";else if(0<=$(this).attr("id").indexOf("to")){var r=$(this).attr("id").split("to");""===r[1]?appjf.getObjOutOfSelectors("from")&&(i=appjf.getObjOutOfSelectors("from").code):appjf.getObjOutOfSelectors("from"+r[1])&&(i=appjf.getObjOutOfSelectors("from"+r[1]).code),n=""!==(o=i)?"From <strong>"+o+"</strong> to where ?":"Where are you <strong>going to</strong>?"}s.html(n)}setTimeout(function(){!0===appjf.ifMobile&&appjf.scrollToElem($("body"),100)},100)}).on("typeahead:close",function(){if($('[role="listbox"]').removeClass("liftListToTop"),$(".tt-input").removeClass("liftInputToTop"),$(".overlayBackground").hide(),$(".m-main-nav-list").removeClass("hideList"),$(".airport-back_arrow").removeClass("showArrow"),setTimeout(function(){$(".input-clear").removeClass("show"),!0===appjf.ifMobile&&"multiple-city"===appjf.formData.flightTypes&&(appjf.scrollToElem(n,100),appjf.flasher(n))},100),document.activeElement&&document.activeElement.blur(),null===appjf.getObjOutOfSelectors(n.attr("id")))n.val("");else{var a=appjf.getObjOutOfSelectors(n.attr("id"));a&&n.val(a.city+" ("+a.code+")")}$(".origin-airport",l).removeClass("liftInputToTop"),$(".airports_list_header").removeClass("open"),window.parent.document.body.style.zoom=1})},setupAutocompleterBestFares:function(){$("#to").bind("ajax-response",appjf.debounce(function(a,t){var o,e=window.data.dataBaseUrl+"landing-seo/ajax-get-best-departure-destination-fares",n=$.map(t,function(a){return a.code}),i=$("#from").data("code"),s=i+"-"+$("#to").val().toLowerCase();i&&"round-trip"===appjf.formData.flightTypes&&(appjf.cashAutoCompleterPrices[s]?$.each(appjf.cashAutoCompleterPrices[s],function(a,t){var e=t.split(","),o=e[0],n=e[1],i=$("#price-display-for-"+o),s='<span class="price_icon"> from $'+n+"</span>";i.closest(".row").addClass("ludes_price"),i.html(s)}):(appjf.cashAutoCompleterPrices[s]=[],$.ajax(e,{data:{departure:i,destinations:n},success:function(a){$.each(a.fares,function(a,t){var e=$("#price-display-for-"+t.destination_code);e.length&&(o='<span class="price_icon"> from $'+Math.ceil(t.best_fare)+"</span>",e.closest(".row").addClass("ludes_price"),e.html(o)),appjf.cashAutoCompleterPrices[s].push([t.destination_code]+","+Math.ceil(t.best_fare))})}})))},500))},bindAirportData:function(a,t){var e=$('.input-mobile[data-mob_input_for="'+a.attr("id")+'"]');$("strong",e).html(t.code),$("small",e).html(t.city)},completerClear:function(){$(".input-clear").on("click",function(){var a=$(this).data("clear-for");$("#"+a).val("").focus()})},onInputFocus:function(){$("input.origin-airport, input.destination-airport").on("click",function(){$(this).select()})},preSetAirports:function(a,t,e){var o=$("#"+a);appjf.changeSelectorsAirportData(a,e,t),o.typeahead("val",t),o.data("code",t),o.val(e+" ("+t+")").focus().blur()},invoking:function(){var a=this;$.each($(".typeahead"),function(){a.bootAutoComplete($("#"+$(this).attr("id")))}),"true"===appjf.formData.autoCompleterPrices&&this.setupAutocompleterBestFares(),this.completerClear(),this.onInputFocus(),window.data.itineraryType&&("city"===window.data.itineraryType.origin&&this.preSetAirports("from",window.data.flightInformation.airport_from,window.data.flightInformation.depart_from),"city"===window.data.itineraryType.destination&&this.preSetAirports("to",window.data.flightInformation.airport_to,window.data.flightInformation.arrive_in))}},$(".material-icons").click(function(){return null}),(appjf=appjf||{}).FlightTypes={events:function(){var e=this;$("#flight-types li button").click(function(a){$("#flight-types button").removeClass("active");var t=$(this).attr("id");$(this).addClass("active"),appjf.formData.flightTypes=t.split("flight-")[1],e.switchInputs()})},switchInputs:function(){switch(appjf.formData.flightTypes){case"one-way":$("#daterange").hide(),$("#daterange0").show(),$(".multiple-city_section").hide(),$(".non-multiple-city_section").show(),$("lpseo_searchform").attr("data-flight_type","one-way"),$("#from").attr("placeholder",appjf.formData.placeholders.default.from),$("#to").attr("placeholder",appjf.formData.placeholders.default.to);break;case"multiple-city":$("#daterange").hide(),$("#daterange0").show(),$(".multiple-city_section").show(),$("lpseo_searchform").attr("data-flight_type","multiple-city"),$("#from").attr("placeholder",appjf.formData.placeholders.multipleCity.from),$("#to").attr("placeholder",appjf.formData.placeholders.multipleCity.to);break;default:$("#daterange0").hide(),$("#daterange").show(),$(".multiple-city_section").hide(),$(".non-multiple-city_section").show(),$("lpseo_searchform").attr("data-flight_type","round-trip"),$("#from").attr("placeholder",appjf.formData.placeholders.default.from),$("#to").attr("placeholder",appjf.formData.placeholders.default.to)}},fixSearchView:function(){$(window).scroll(function(){684<$(window).width()&&(500<$(this).scrollTop()?($(".seg-rows").addClass("fixed"),"multiple-city"===appjf.formData.flightTypes&&$("#flight-round-trip").click()):$(".seg-rows").removeClass("fixed"))})},invoking:function(){this.events(),684<$(window).width()&&this.fixSearchView()}},(appjf=appjf||{}).FormControllers={segmentRemovals:function(){var t=this;function e(a){$('[data-row_segment_assignment="'+a+'"]').hide(),appjf.SegmentsStatus.hidden.push(a),appjf.SegmentsStatus.visible.splice($.inArray(a,appjf.SegmentsStatus.visible),1),appjf.SegmentsStatus.hidden.sort(),t.segmentVisibility(),$.each($('.seg-row[data-row_segment_assignment="'+a+'"] input'),function(){void 0!==$(this).attr("id")&&(appjf.removeFromSelectors($(this).attr("id")),$("#"+$(this).attr("id")).clear(),appjf.storage.removeObject($(this).attr("id")))}),console.log(appjf.SegmentsStatus)}$('.multiple_inputs_controllers i[data-purpose="remove"]').on("click",function(){e($(this).data("segment_assignment"))}),$("#remove-segment-mob").on("click",function(){if(1<appjf.SegmentsStatus.visible.length){var a=appjf.SegmentsStatus.visible.reverse()[0];appjf.SegmentsStatus.visible.sort(),e(a)}})},segmentVisibility:function(){$.each(appjf.SegmentsStatus.visible,function(a,t){$('[data-row_segment_assignment="'+t+'"]').show()}),$.each(appjf.SegmentsStatus.hidden,function(a,t){$('[data-row_segment_assignment="'+t+'"]').hide()})},addSegmentFilterBtn:function(){var t=this;$("#add_segment_filter").on("click",function(){if(0<appjf.SegmentsStatus.hidden.length){var a=appjf.SegmentsStatus.hidden[0];appjf.SegmentsStatus.visible.push(a),appjf.SegmentsStatus.hidden.splice($.inArray(a,appjf.SegmentsStatus.hidden),1),t.segmentVisibility()}})},clearAdditionalSegments:function(){$("#clear_inputs_segment_filter").on("click",function(){$.each($(".multiple-city_section input"),function(){!$(this).attr("class")&&"input-passengers"===$(this).attr("class")||$(this).clear()})})},submitFlightBtn:function(){$("#submit-flight-btn, #mob-submit-flight-btn").on("click",function(){var a=$(this).attr("id");appjf.FormValidation.invoking(a),appjf.DatePicker.multiple_dates_sequence_validation()})},mobileControllers:function(){$(window).width()<684?$(".input-mobile").show(function(){var a=$(this).data("mob_input_for");appjf.getObjOutOfSelectors(a)&&($("strong",this).html(appjf.getObjOutOfSelectors(a).code),$("small",this).html(appjf.getObjOutOfSelectors(a).city))}).on("click",function(){$("#"+$(this).data("mob_input_for")).click()}):$(".input-mobile").hide()},hotelsOption:function(){$(".hotels_option_label").on("click",function(){var a=$(".hotels_option_label > i");"false"===a.attr("data-lude_hotel")?(a.addClass("fa-check-square-o"),a.removeClass("fa-square-o"),a.attr("data-lude_hotel","true"),appjf.formData.hotelOption=!0):(a.addClass("fa-square-o"),a.removeClass("fa-check-square-o"),a.attr("data-lude_hotel","false"),appjf.formData.hotelOption=!1)})},invoking:function(){this.segmentRemovals(),this.segmentVisibility(),this.addSegmentFilterBtn(),this.clearAdditionalSegments(),this.submitFlightBtn(),this.mobileControllers();var a=this;$(window).on("resize",function(){a.mobileControllers(),setTimeout(function(){$("lpseo_searchform").css("visibility","visible")},1e3)}),window.onload=new function(){window.innerWidth<701&&$("lpseo_searchform").css("visibility","visible")}}},(appjf=appjf||{}).PassengerInfo={general_passengers_info_dropdown:function(a,t){var e=[];if("plus-unit"===a&&("infants"===t||"infants_lap"===t)&&appjf.formData.passengers.infants+appjf.formData.passengers.infants_lap>=appjf.formData.passengers.adults?e.push(appjf.formData.errorTxt[2]):"minus-unit"===a&&"adults"===t&&appjf.formData.passengers.infants+appjf.formData.passengers.infants_lap>=appjf.formData.passengers.adults?e.push(appjf.formData.errorTxt[2]):"minus-unit"===a&&"adults"===t&&1===appjf.formData.passengers.adults&&e.push("Must be at least 1 adult"),e.length<1){if("row flight-class-btn"===a)appjf.formData.flightClass=t.split("_")[0],$(".flight-class-btn i.fa").attr("class","fa fa-toggle-off"),$('.flight-class-btn[data-flightclassfor="'+t+'"] i.fa').attr("class","fa fa-toggle-on");else if("plus-unit"===a&&appjf.formData.passengers.total<9){var o=$('.input-passengers[data-input-for="'+t+'"]');switch(t){case"adults":appjf.formData.passengers.adults++,o.val(appjf.formData.passengers.adults);break;case"children":appjf.formData.passengers.children++,o.val(appjf.formData.passengers.children);break;case"infants":appjf.formData.passengers.infants++,o.val(appjf.formData.passengers.infants);break;case"infants_lap":appjf.formData.passengers.infants_lap++,o.val(appjf.formData.passengers.infants_lap)}appjf.formData.passengers.total++}else if("minus-unit"===a&&0<appjf.formData.passengers[t]){o=$('.input-passengers[data-input-for="'+t+'"]');switch(t){case"adults":appjf.formData.passengers.adults--,o.val(appjf.formData.passengers.adults);break;case"children":appjf.formData.passengers.children--,o.val(appjf.formData.passengers.children);break;case"infants":appjf.formData.passengers.infants--,o.val(appjf.formData.passengers.infants);break;case"infants_lap":appjf.formData.passengers.infants_lap--,o.val(appjf.formData.passengers.infants_lap)}appjf.formData.passengers.total--}var n=$("#passengers-info-input"),i=$("#mob-passengers-info-input"),s=1<appjf.formData.passengers.total?"passengers":"passenger";n.val(appjf.formData.passengers.total+" "+s+" | "+appjf.ucwords(appjf.formData.flightClass)),i.val(appjf.formData.passengers.total+" "+s+" | "+appjf.ucwords(appjf.formData.flightClass));var r=$("#passengers-info-input2");$("span",r).html(appjf.formData.passengers.total+" "+s),$("small",r).html(appjf.ucwords(appjf.formData.flightClass)),$("#passengers-info-input3").val(appjf.formData.passengers.total+" "+s+" | "+appjf.ucwords(appjf.formData.flightClass))}else{var l=$(".passengers-error");l.html(""),$.each(e,function(a,t){l.append(t)}),setTimeout(function(){l.html("")},2e3)}},passengersInput:function(){$("#passengers-info-input, .passengers-info-input-arrow-down, #mob-passengers-info-input, .mob-psg-info-display").on("click",function(){$(".m-passengers-info-dropdown").toggle()}),$(document).mouseup(function(a){var t=$(".m-passengers-info-dropdown");a.target.className===t.attr("class")||t.has(a.target).length||"m-passengers-info-dropdown"===a.target.className||t.css("display","none")})},passengersValidation:function(a){var t=[],e=appjf.formData.errorTxt;if("plus-unit"===a.btnClass&&(8<appjf.formData.passengers.total&&t.push(e[1]),"adults"!==a.dataTarget&&"children"!==a.dataTarget&&appjf.formData.passengers.adults<=appjf.formData.passengers.infants+appjf.formData.passengers.infants_lap&&t.push(e[0])),"minus-unit"===a.btnClass&&(a.passengers<1&&t.push(""),"adults"===a.dataTarget&&appjf.formData.passengers.adults<2&&t.push(e[2]),"infants"!==a.dataTarget&&"infants_lap"!==a.dataTarget&&appjf.formData.passengers.adults<=appjf.formData.passengers.infants+appjf.formData.passengers.infants_lap&&t.push(e[0])),t.length<1)return!0;var o=$(".passengers-error");return o.html(""),$.each(t,function(a,t){""!==t?t+="<br>":t="",o.append(t)}),setTimeout(function(){o.html("")},2e3),!1},passengersControllers:function(){var t=this;appjf.formData.flightClass;$(".plus-unit").on("click",function(){var a=$(this).data("target-passenger");t.passengersValidation({passengers:appjf.formData.passengers[a],dataTarget:a,btnClass:"plus-unit"})&&(appjf.formData.passengers[a]++,appjf.formData.passengers.total++,$('.input-passengers[data-input-for="'+a+'"]').val(appjf.formData.passengers[a]),t.updateMainInput())}),$(".minus-unit").on("click",function(){var a=$(this).data("target-passenger");t.passengersValidation({passengers:appjf.formData.passengers[a],dataTarget:a,btnClass:"minus-unit"})&&(appjf.formData.passengers[a]--,appjf.formData.passengers.total--,$('.input-passengers[data-input-for="'+a+'"]').val(appjf.formData.passengers[a]),t.updateMainInput())}),$(".flight-class-btn").on("click",function(){var a=$(this).data("flightclassfor");$(".fa-toggle-on").addClass("fa-toggle-off").removeClass("fa-toggle-on"),$("i",this).addClass("fa-toggle-on").removeClass("fa-toggle-off"),appjf.formData.flightClass=a,t.updateMainInput()})},updateMainInput:function(){var a="";switch(appjf.formData.flightClass){case"economy_class":a="Economy";break;case"premium_class":a="Premium";break;case"business_class":a="Business";break;case"first_class":a="First"}var t="";t=1<appjf.formData.passengers.total?"passengers":"passenger",$("#passengers-info-input, #mob-passengers-info-input").val(appjf.formData.passengers.total+" "+t+" | "+a),$(".mob-psg-info-display strong").html(appjf.formData.passengers.total+" "+t),$(".mob-psg-info-display small").html(a)},dropdownClose:function(){$("i.dropdown-close, .passengers-dropdown-btn-section .dropdown-btn").on("click",function(){$(".m-passengers-info-dropdown").css("display","none")})},invoking:function(){this.passengersInput(),this.passengersControllers(),this.dropdownClose()}},(appjf=appjf||{}).RecentSearches={template:function(a){return['<div class="li">','<a href="'+a.link+'" target="_blank">','<div class="rs_locations">','<i class="fa fa-plane" aria-hidden="true"></i> ',a.from,' <i class="fa fa-arrow-right" aria-hidden="true"></i> ',a.to,"</div>",'<div class="rs_dates">','<i class="fa fa-calendar" aria-hidden="true"></i> ',a.datesShort,"</div>",'<div class="rs_prices">','<span class="old-price"></span>',a.price,"</div>","</a>","</div>"].join("")},getData:function(){var e=this,o=$("lpSeo_RecentSearches .ul");o.html(""),0<window.data.recentSearches.length&&($.each(window.data.recentSearches,function(a,t){o.append(e.template(t))}),$(".header-bg-container").css("padding","10% 0 10%"))},invoking:function(){this.getData()}},(appjf=appjf||{}).formData={flightTypes:"round-trip",selectors:[],errors:[],passengers:{adults:1,children:0,infants:0,infants_lap:0,total:1},flightClass:"economy_class",errorTxt:["Number of infants cannot exceed adults.","Maximum of 9 passengers allowed per booking.","Must be one adult at least."],mobileWidthMax:680,hotelOption:!0,lastSelectedDates:{},autoCompleterPrices:"true",autoCompleterFlags:!1,pricepointcalendar:"dots",tooltiptext_calendar:"Good Deal",placeholders:{default:{from:"Enter departure city or airport",to:"Enter destination city or airport"},multipleCity:{from:"From where?",to:"To where?"}}},appjf.SegmentsStatus={visible:[1],hidden:[2,3,4,5,6]},appjf.SearchFormIndex={invoking:function(){appjf.FlightTypes.invoking(),appjf.DatePicker.invoking(),appjf.AutoCompleter.invoking(),appjf.PassengerInfo.invoking(),appjf.FormControllers.invoking(),appjf.RecentSearches.invoking()}},(appjf=appjf||{}).FormValidation={resultsLinkGen:function(){var a,t,e=window.location.origin+"/flight/search?";switch(appjf.formData.flightClass){case"first_class":a="First";break;case"business_class":a="Business";break;case"premium_class":a="EconomyPremium";break;default:a="Economy"}switch(appjf.formData.flightTypes){case"multiple-city":t="multi";break;case"one-way":t="oneway";break;default:t="roundtrip"}var o=function(){var e={};if("round-trip"===appjf.formData.flightTypes)e={seg0_date:appjf.getObjOutOfSelectors("daterange").date.startDate.format("YYYY-MM-DD"),seg1_date:appjf.getObjOutOfSelectors("daterange").date.endDate.format("YYYY-MM-DD")};else if("one-way"===appjf.formData.flightTypes)e={seg0_date:appjf.getObjOutOfSelectors("daterange").date.startDate.format("YYYY-MM-DD")};else{var o=0;$.each(appjf.formData.selectors,function(a,t){this.date&&"daterange"!==this.id&&(e[function(a){return"seg"+a+"_date"}(o)]=this.date.startDate.format("YYYY-MM-DD"),o++)})}return e}();var n=function(){var e={};if("round-trip"===appjf.formData.flightTypes)e={seg0_from:appjf.getObjOutOfSelectors("from").code,seg0_to:appjf.getObjOutOfSelectors("to").code,seg1_from:appjf.getObjOutOfSelectors("to").code,seg1_to:appjf.getObjOutOfSelectors("from").code};else if("one-way"===appjf.formData.flightTypes)e={seg0_from:appjf.getObjOutOfSelectors("from").code,seg0_to:appjf.getObjOutOfSelectors("to").code};else{var o=function(a,t){return 0!==parseInt(a)?"seg"+parseInt(a)+"_"+t.slice(0,-1):"seg0_"+t},n=0,i=0;$.each(appjf.formData.selectors,function(a,t){this.code&&(0<=this.id.indexOf("from")&&(e[o(n,t.id)]=t.code,n++),0<=this.id.indexOf("to")&&(e[o(i,t.id)]=t.code,i++))})}return e}(),i={num_adults:appjf.formData.passengers.adults,num_children:appjf.formData.passengers.children,num_infants:appjf.formData.passengers.infants,num_infants_lap:appjf.formData.passengers.infants_lap,seat_class:a,hotel_option:!1,type:t,campaign:window.data.campaign};$.extend(i,o),$.extend(i,n);var s="";return $.each(i,function(a,t){s+=a+"="+t+"&"}),s=s.slice(0,-1),console.log("Results link generated."),{link:e+s,checkIn:o.seg0_date,checkOut:o.seg1_date,toCity:appjf.getObjOutOfSelectors("to").city,toCode:appjf.getObjOutOfSelectors("to").code}},sendToResults:function(){window.location.href=this.resultsLinkGen().link},displayErrors:function(a){var e="";$.each(a,function(a,t){e+="<li>"+t+"</li>"});var t=$("#errorsModal");$(".modal-body",t).html("<ul>"+e+"</ul>")},errorsValidation:function(){var i=[],a=[];return"round-trip"===appjf.formData.flightTypes&&(a=["from","to","daterange"]),"one-way"===appjf.formData.flightTypes&&(a=["from","to","daterange0"]),"multiple-city"===appjf.formData.flightTypes&&(a=["from","to","daterange0"],$.each($(".multiple-city_section .seg-row:visible input"),function(){void 0!==$(this).attr("id")&&a.push($(this).attr("id"))})),$.each(a,function(a,t){appjf.getObjOutOfSelectors(t);if(!appjf.getObjOutOfSelectors(t)){var e=$("#"+t).val(),o="";0<=t.indexOf("from")||0<=t.indexOf("to")?o="Enter city or airport":"daterange"===t?o="Select dates":0<=t.indexOf("daterange")&&(o="Select departure date"),$("#"+t).val(o).addClass("redTxt"),$('[data-mob_input_for="'+t+'"]').addClass("redBg"),setTimeout(function(){$("#"+t).val(e).removeClass("redTxt"),$('[data-mob_input_for="'+t+'"]').removeClass("redBg")},3e3);var n="Please enter valid information in the missing fields.";-1===i.indexOf(n)&&i.push(n)}}),i},invoking:function(a){var t=this.errorsValidation();this.submitingBtnId=a,0===t.length?this.sendToResults(t):this.displayErrors(t)}};var appjf=appjf||{};window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),appjf.querydataByID=function(a,e){var o={};return $.each(a,function(a,t){$(this)[0].id===e&&(o={id:$(this)[0].id,city:$(this)[0].city,code:$(this)[0].code})}),o},appjf.storage=function(){var e={},o=function(){var a="test";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(a){return!1}}();return{setItem:function(a,t){if(o)try{return void localStorage.setItem(a,t)}catch(a){}e[a]=t},getItem:function(a){if(o){var t=localStorage.getItem(a);if(null!==t)return t}return void 0!==e[a]?e[a]:null},setObject:function(a,t){return this.setItem(a,JSON.stringify(t))},getObject:function(a){return JSON.parse(this.getItem(a))},removeObject:function(a){localStorage.removeItem(a)}}}(),appjf.getDatesFromLocalStorage=function(){return{startDate:moment(appjf.storage.getItem("startDate")),endDate:moment(appjf.storage.getItem("endDate")),singleDate:appjf.storage.getItem("singleDate")}},appjf.initDateMultiplePickers=function(){$.each($("input[id*='daterange']"),function(){"daterange"===$(this).attr("id")?appjf.formDatapicker("round",$("#"+$(this).attr("id"))):appjf.formDatapicker("single",$("#"+$(this).attr("id")))}),appjf.formDatapicker("round",$("#daterange"))},appjf.tooltipErrors=function(a,t){0<t.length?$("#"+a[0]).tooltip({title:t[0][1],trigger:"click",placement:"bottom"}).trigger("click").focus().keydown(function(){$(this).tooltip("hide")}):$(".errors-for").html("")},appjf.scrollToAnchor=function(a){var t=$("[name='"+a+"']");$("html, body").animate({scrollTop:t.offset().top-70},"fast")},appjf.scrollToElem=function(a,t){t||(t=70),$("html,body").animate({scrollTop:a.offset().top-t},"fast")},appjf.starsCounter=function(a){for(var t='<i class="fa fa-star" aria-hidden="true" style="color:#918501"></i>',e=1;e<a;e++)t+='<i class="fa fa-star" aria-hidden="true" style="color:#918501"></i>';return t},appjf.changeSelectorsAirportData=function(a,t,e){for(var o=appjf.formData.selectors,n=appjf.formData.errors,i=0;i<o.length;i++)o[i].id===a&&o.splice(i,1);for(var s=0;s<n.length;s++)n[s].id===a&&n.splice(s,1);$(".tooltiper").removeClass("open"),appjf.formData.selectors.push({id:a,city:t,code:e})},appjf.changeSelectorsDaterangeData=function(a,t,e){for(var o=appjf.formData.selectors,n=0;n<o.length;n++)o[n].id===a&&o.splice(n,1);for(var i=appjf.formData.errors,s=0;s<i.length;s++)i[s].id===a&&i.splice(s,1);if($(".tooltiper").removeClass("open"),appjf.formData.selectors.push({id:a,date:{startDate:t,endDate:e}}),e&&null!==e)var r={startDate:t,endDate:e};else r={startDate:t};appjf.storage.setObject(a,r)},appjf.getObjOutOfSelectors=function(a){var t=appjf.formData.selectors;if(0===t.length)return null;for(var e=0;e<t.length;e++)if(t[e].id===a)return t[e]},appjf.removeFromSelectors=function(a){for(var t=appjf.formData.selectors,e=0;e<t.length;e++)t[e].id===a&&t.splice(e,1)},appjf.getObjOutOfErrors=function(a){var t=appjf.formData.errors;if(0===t.length)return null;for(var e=0;e<t.length;e++)if(t[e].id===a)return t[e]},appjf.trackGoogleRemarketing=function(a){var t={};t[a]=!0,Mv.SEM.trackGoogleRemarketing(t)},appjf.flightClassConvert=function(a,t){var e,o=t?"":" Class";switch(a){case"economy_class":case"economy":e="Economy"+o;break;case"premium_class":case"premium":e="Premium"+o;break;case"business_class":case"business":e="Business"+o;break;case"first_class":case"first":e="First Class"}return e},appjf.flasher=function(a,t){var e;e=t||"flasher",a.toggleClass(e),setTimeout(function(){a.toggleClass(e)},1e3)},appjf.flasher_icon=function(a){var o=a.classToToggle,n=a.targetElem,i=a.speed,s=i/2,r=a.flashingTimes*i;$.each(n,function(a){var t=n[a].html(),e=setInterval(function(){n[a].addClass(o),setTimeout(function(){n[a].removeClass(o),n[a].html(t)},s)},i);setTimeout(function(){clearInterval(e)},r)})},appjf.flasher_icon2=function(a){var t=a.classToToggle,e=a.targetElem,o=a.speed,n=o/2,i=a.flashingTimes*o,s=e.html(),r=setInterval(function(){e.addClass(t),setTimeout(function(){e.removeClass(t),e.html(s)},n)},o);setTimeout(function(){clearInterval(r)},i)},appjf.get_browser=function(){var a,t=navigator.userAgent,e=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],o="";return o=-1!==navigator.userAgent.indexOf("Mac OS X")?"mac":"pc",/trident/i.test(e[1])?{name:"IE",version:(a=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"",machin:o}:"Chrome"===e[1]&&null!=(a=t.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:a[1],machin:o}:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=t.match(/version\/(\d+)/i))&&e.splice(1,1,a[1]),{name:e[0],version:e[1],machin:o})},appjf.content_wrapper=function(){var a=$(".content-wrapper"),t=$(window).outerHeight();a.css("min-height",t-150+"px")},appjf.getCookie=function(a){for(var t=a+"=",e=decodeURIComponent(document.cookie).split(";"),o=0;o<e.length;o++){for(var n=e[o];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},appjf.ucwords=function(a){var t=a.split("-");return 1<t.length?appjf.capitalize(t[0])+"-"+appjf.capitalize(t[1]):(a+"").replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})},appjf.capitalize=function(a){var t=a.substring(1);return a.substring(0,1).toUpperCase()+t},appjf.display_facebook_likes=function(){return'<div class="fb-like fb_iframe_widget" data-href="https://www.facebook.com/TravelofareGlobal/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=112196812761905&amp;container_width=0&amp;href=https%3A%2F%2Fwww.facebook.com%2FTravelofareGlobal%2F&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey&amp;share=false&amp;show_faces=true"><span style="vertical-align: bottom; width: 80px; height: 20px;"><iframe name="f745001f90eb44" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="https://www.facebook.com/v2.8/plugins/like.php?action=like&amp;app_id=112196812761905&amp;channel=https%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter%2Fr%2FlY4eZXm_YWu.js%3Fversion%3D42%23cb%3Df13df851bfaf8d4%26domain%3Dwww.Travelofare.com%26origin%3Dhttps%253A%252F%252Fwww.Travelofare.com%252Ff3ba47ceba1a064%26relation%3Dparent.parent&amp;container_width=0&amp;href=https%3A%2F%2Fwww.facebook.com%2FTravelofareGlobal%2F&amp;layout=button_count&amp;locale=en_US&amp;sdk=joey&amp;share=false&amp;show_faces=true" style="border: none; visibility: visible; width: 80px; height: 20px;" class=""></iframe></span></div>'},appjf.apply_passenger_data_to_desktop_inputs=function(){var a=1<appjf.formData.passengers.total?"passengers":"passenger";$("#passengers").val(appjf.formData.passengers.total+" "+a),$("#flightClass").val(appjf.capitalize(appjf.formData.flightClass)+" Class"),$("#input-adults").val(appjf.formData.passengers.adults),$("#input-children").val(appjf.formData.passengers.children),$("#input-infants").val(appjf.formData.passengers.infants),$("#input-infants-lap").val(appjf.formData.passengers.infants_lap),$("i[data-btn-for]","#flightClass-droopDown ").removeClass("fa-check-circle").addClass("fa-circle-thin"),$('i[data-btn-for="input-'+appjf.formData.flightClass+'_class"]',"#flightClass-droopDown ").removeClass("fa-circle-thin").addClass("fa-check-circle")},appjf.simplifyDate=function(a){return moment(a.format("DD-MM-YYYY"),"DD-MM-YYYY").format("x")},appjf.m_calendar_close=function(a){$(".m-calendarDisplay").remove(),$(".wrapper").removeClass("hide"),"calendar-mob-close"!==a.attr("id")&&$.each(appjf.formData.selectors,function(a,t){if(0<=$(this)[0].id.indexOf("daterange")){var e=$(this)[0].id;appjf.formData.lastSelectedDates[e]=$(this)[0].date}})},appjf.apply_bg_mobile_squere=function(a,t){$('[data-input_for="'+a+'"] .squareBg').attr("style","background: url('images/guides/city-adwords/lp12/1920x1080/"+t+".jpg');background-size: cover;background-attachment: scroll;")},appjf.text2Binary=function(a){var t=a.split("").map(function(a){return a.charCodeAt(0).toString(2)}),e=0;return $.each(t,function(a,t){e+=parseInt(t)}),e},appjf.detect_device=function(){var a=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(a)?"Windows Phone":/android/i.test(a)?"Android":/iPad|iPhone|iPod/.test(a)&&!window.MSStream?"iOS":"unknown"},appjf.detectIfMobile=function(){return a="",window.navigator.userAgent.match(/Mobile/i)||window.navigator.userAgent.match(/iPhone/i)||window.navigator.userAgent.match(/iPod/i)||window.navigator.userAgent.match(/IEMobile/i)||window.navigator.userAgent.match(/Windows Phone/i)||window.navigator.userAgent.match(/Android/i)||window.navigator.userAgent.match(/BlackBerry/i)||window.navigator.userAgent.match(/webOS/i)?window.navigator.userAgent.match(/Tablet/i)||window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/Nexus 7/i)||window.navigator.userAgent.match(/Nexus 10/i)||window.navigator.userAgent.match(/KFAPWI/i)?a=window.deviceTypeVar="tablet":(a="smartphone",window.deviceTypeVar="smartphone"):window.navigator.userAgent.match(/Intel Mac/i)?(a="desktop/laptop",window.deviceTypeVar="desktop_or_laptop"):window.navigator.userAgent.match(/Nexus 7/i)||window.navigator.userAgent.match(/Nexus 10/i)||window.navigator.userAgent.match(/KFAPWI/i)?a=window.deviceTypeVar="tablet":(a="unknown",window.deviceTypeVar="Unknown"),a;var a},appjf.getUrlParameter=function(a){var t,e,o=decodeURIComponent(window.location.search.substring(1)).split("&");for(e=0;e<o.length;e++)if((t=o[e].split("="))[0]===a)return void 0===t[1]||t[1]},appjf.debounce=function(o,n,i){var s;return function(){var a=this,t=arguments,e=i&&!s;clearTimeout(s),s=setTimeout(function(){s=null,i||o.apply(a,t)},n),e&&o.apply(a,t)}},appjf.getMonthDateRange=function(a,t){var e=moment([a,t-1]);return{start:e,end:moment(e).endOf("month")}},appjf.addzeros=function(a,t){for(var e=""+a;e.length<t;)e="0"+e;return e},appjf.ratingStars=function(a){if(a){for(var t=a.split("."),e=[],o=[],n=0;n<parseInt(t[0]);n++)e.push('<i class="fa fa-star" aria-hidden="true"></i>');"5"===t[1]&&e.push('<i class="fa fa-star-o" aria-hidden="true"></i>');for(var i=0;i<5-e.length;i++)o.push('<i class="fa fa-star-o" aria-hidden="true"></i>');return $.merge(e,o).join("")}return"ratingStars() have no parameter"},appjf.displayNotes=function(){$.each(["When #daterange selected, wrong ID applied to daterange1"],function(a,t){console.log(t)})},jQuery.fn.isInViewport=function(){var a=$(this).offset().top,t=a+$(this).outerHeight(),e=$(window).scrollTop(),o=e+$(window).height();return e<t&&a<o},jQuery.fn.center=function(){return this.css("position","absolute"),this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px"),this},jQuery.fn.clear=function(){this.val(""),this.attr("id")&&(appjf.removeFromSelectors(this.attr("id")),appjf.getObjOutOfErrors(this.attr("id")),this.data("city","").data("code","").data("startDate","").data("endDate",""))},(appjf=appjf||{}).PopularDestinationsFromIp={initSlick:function(){var a=$(".PopularDestinationsFromIp-slick");a.on("init",function(){$(this).show()}),a.slick({dots:!0,infinite:!0,slidesToShow:3,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,responsive:[{breakpoint:1020,settings:{slidesToShow:2,slidesToScroll:1,autoplaySpeed:3e3}},{breakpoint:700,settings:{slidesToShow:1,slidesToScroll:1,autoplaySpeed:3e3}}]}),this.addLinkToAction()},addLinkToAction:function(){$("lpSeo_PopularDestinationsFromIp .slider-item-action").on("click",function(){location.href=$(this).data("link")})},invoking:function(){this.initSlick()}},(appjf=appjf||{}).BestDealsOfTheDay={initSlick:function(){var a=$(".bestDealsOfTheDay-slick");a.on("init",function(){$(this).show()}),a.slick({dots:!0,infinite:!0,slidesToShow:3,slidesToScroll:3,autoplay:!0,autoplaySpeed:4e3,responsive:[{breakpoint:1020,settings:{slidesToShow:2,slidesToScroll:1,autoplaySpeed:3e3}},{breakpoint:700,settings:{slidesToShow:1,slidesToScroll:1,autoplaySpeed:3e3}}]}),this.addLinkToAction()},addLinkToAction:function(){$("lpSeo_BestDealsOfTheDay .slider-item-action").on("click",function(){localStorage.setItem("daterange0",'{"startDate":"'+$(this).data("startdate")+'T05:00:00.000Z"}'),localStorage.setItem("daterange",'{"startDate":"'+$(this).data("startdate")+'T05:00:00.000Z","endDate":"'+$(this).data("enddate")+'T05:00:00.000Z"}'),location.href=$(this).data("link")})},invoking:function(){this.initSlick()}},(appjf=appjf||{}).Weather={presetVoyag:{Cuba:[{country_code:"cu",city:"Varadero",code:"VRA",airport:"Juan Gualberto Gmez Airport",banner:""}],Mexico:[{country_code:"mx",city:"Playa del Carmen",code:"PCM",airport:"Aerodromo de Playa Del Carmen",banner:"mexico_summer_banner.jpg"}],Canada:[{country_code:"ca",city:"Vancouver",code:"YVR",airport:"Vancouver International Airport",banner:"canada_winter_banner.jpg",available:{startDate:"18/12/2018",endDate:"20/04/2019"}}],USA:[{country_code:"us",city:"Denver",code:"DEN",airport:"Denver International Airport",banner:""}]},getData:function(){var a=$("lpseo_weather"),t=(window.data.geoIp_departure_city,"");if(window.data.weather){var e=JSON.parse(window.data.weather).main.temp;if(e<=5&&(a.html('<img class="weather_banner" src="/images/lpSeo/banners/'+this.presetVoyag.Mexico[0].banner+'" data-code="'+this.presetVoyag.Mexico[0].code+'">'),t=this.presetVoyag.Mexico[0].code),20<=e){var o=moment(moment().format("DD/MM/YYYY"),"DD/MM/YYYY"),n=moment(this.presetVoyag.Canada[0].available.startDate,"DD/MM/YYYY"),i=moment(this.presetVoyag.Canada[0].available.endDate,"DD/MM/YYYY");o.isBetween(n,i)&&(a.html('<img class="weather_banner" src="/images/lpSeo/banners/'+this.presetVoyag.Canada[0].banner+'" data-code="'+this.presetVoyag.Canada[0].code+'">'),t=this.presetVoyag.Canada[0].code)}}if(""!==t){var s="/fares/search/?"+("seg0_from="+window.data.geoIp_departure_airport_code+"&seg0_to="+t+"&seg1_from="+t+"&seg1_to="+window.data.geoIp_departure_airport_code+"&seg0_date="+moment().startOf("isoWeek").add(5,"days").format("YYYY-MM-DD")+"&seg1_date="+moment().startOf("isoWeek").add(10,"days").format("YYYY-MM-DD")+"&num_adults=1&num_children=0&num_infants=0&num_infants_lap=0&seat_class=&preferred_carrier_code=&nearby_airports=0&flexible_date=0&non_penalties=0&non_stop=0&non_stop=0");$(".weather_banner").on("click",function(){window.open(s,"_blank")})}},invoking:function(){this.getData()}},(appjf=appjf||{}).AirlinesRatings={colors:function(){var a=$("lpseo_airlinesrating td[data-avg_color]");function n(a){return{5:"#63be7b",4.9:"#6bc17c",4.8:"#73c37c",4.7:"#7bc57d",4.6:"#83c87d",4.5:"#8bca7e",4.4:"#92cc7e",4.3:"#9ace7f",4.2:"#a2d17f",4.1:"#aad380",4:"#b2d580",3.9:"#b9d780",3.8:"#c1da81",3.7:"#c9dc81",3.6:"#d1de82",3.5:"#d8e082",3.4:"#e0e283",3.3:"#e8e583",3.2:"#f0e784",3.1:"#f8e984",3:"#ffeb84",2.9:"#fee482",2.8:"#fede81",2.7:"#fdd780",2.6:"#fdd07f",2.5:"#fdca7d",2.4:"#fcc47c",2.3:"#fcbd7b",2.2:"#fcb77a",2.1:"#fbb078",2:"#fbaa77",1.9:"#fba376",1.8:"#fa9d75",1.7:"#fa9673",1.6:"#fa9072",1.5:"#f98971",1.4:"#f9826f",1.3:"#f97c6e",1.2:"#f8756d",1.1:"#f86f6c",1:"#f8696b"}[a]}$.each(a,function(a,t){var e=Number($(this).data("avg_color")),o=""!==n(e)?n(e):"";$(this).css("background",o)})},invoking:function(){setTimeout(this.colors(),5e3)}},(appjf=appjf||{}).Cartrawler={makeScriptCall:function(a,t,e,o,n,i){var s="https://cars.cartrawler.com/Travelofare/widget?"+["type=js","clientId=688638","num="+e,"locCode="+o,"curr="+n,"residencyId="+i,"pkDateTime="+a+"1000","rtDateTime="+t+"1000","testToken=","passengers=1","c=ie"].join("&");$.getScript(s,function(a,t,e){window.myWidget&&0===$(myWidget.fld).find(".ctwdg-car-columns").length?($("#car-upsell").hide(),$("#car-upsell:hidden")&&$("lpseo_cartrawler").hide()):$("#car-upsell .spinner-wrap").fadeOut(300,function(){$("#carloader").hide(),$("#Widget").show()})})},startScriptCall:function(){var a,t,e=appjf.getObjOutOfSelectors("daterange");a=e.date.startDate?e.date.startDate.format("YYYYMMDD"):moment().add("7","day").format("YYYYMMDD"),t=e.date.endDate?e.date.endDate.format("YYYYMMDD"):moment().add("14","day").format("YYYYMMDD");var o=appjf.getObjOutOfSelectors("to"),n=window.data.geoIp_departure_airport_code;window.data.popularDestinations&&0<window.data.popularDestinations.length?n=window.data.popularDestinations[0].destination_airport_code:window.data.flightInformation&&!$.isEmptyObject(window.data.flightInformation)&&(n=window.data.flightInformation.airport_to),o=o?o.code:n,this.makeScriptCall(a,t,4,o,window.data.currency.toUpperCase(),window.data.country.toUpperCase())},invoking:function(){this.startScriptCall()}},(appjf=appjf||{}).Deals={packageBtn:function(){$.each($("[id^=package_btn_]"),function(){$(this).on("click",function(){var a=$.base64.decode($(this).data("package-details")).split(","),t=a[0],e=a[1],o="seg0_from="+t+"&seg0_to="+e+"&seg1_from="+e+"&seg1_to="+t+"&seg0_date="+a[2]+"&seg1_date="+a[3]+"&campaign="+a[4]+"&num_adults=1";window.open("/flight/search?"+o,"_blank")})})},assignStars:function(){$.each($(".ratingStars"),function(){var a=$(this).html();""!==a&&$(this).html(appjf.ratingStars(a))})},removeRatingLinks:function(){$.each($(".deal_trip_duration"),function(){parseInt($("span",this).data("overall_rating"))<1&&$("span",this).remove()})},airlineRatingBtn:function(){$(".airline_rating_btn").on("click",function(){var a=$("#"+$(this).attr("data-toggle_display_id"));$(".airline_ratings").fadeOut(),1<parseInt($(this).data("overall_rating"))&&a.fadeIn()}),$(".airline_ratings").on("click",function(){$(this).fadeOut()}),$(document).mouseup(function(a){var t=$(".airline_ratings");a.target.className===t.attr("class")||t.has(a.target).length||"airline_ratings"===a.target.className||t.css("display","none")})},invoking:function(){window.data.apiDealsResult&&0<window.data.apiDealsResult.length&&(this.assignStars(),this.airlineRatingBtn(),this.packageBtn(),this.removeRatingLinks())}},(appjf=appjf||{}).FlightInformation={invoking:function(){}},(appjf=appjf||{}).Footer={display:function(){$(window).scroll(function(){$(window).width()<701&&($(this).scrollTop()<300||$(this).scrollTop()>$(document).height()-$(window).height()-300?$("#scroll_to_top").fadeOut():$("#scroll_to_top").fadeIn())})},activate:function(){$("#scroll_to_top").click(function(){return $("html, body").animate({scrollTop:0},"slow"),!1})},invoking:function(){this.display(),this.activate()}},(appjf=appjf||{}).GlobalEventListener={filter:{daterange:function(){var a=0,t=$("#daterange").val();setInterval(function(){$("#daterange")&&$("#daterange").val()!==t&&(t=$("#daterange").val(),function(){appjf.Cartrawler&&a<=3&&(a++,appjf.Cartrawler.startScriptCall());appjf.PopularHotels&&appjf.PopularHotels.getData()}())},100)},destination:function(){var a=$("#to").data("code");setInterval(function(){$("#daterange")&&$("#to").data("code")!==a&&(a=$("#to").data("code"),function(){appjf.Cartrawler&&appjf.Cartrawler.startScriptCall();appjf.PopularHotels&&appjf.PopularHotels.getData()}())},100)}},invoking:function(){this.filter.daterange(),this.filter.destination()}},(appjf=appjf||{}).Header={btnAction:function(){$(".header_dropdown").mouseup(function(a){var t=$(".mobile-container");t.is(a.target)||0!==t.has(a.target).length||$(".header_dropdown").hide()}),$(document).mouseup(function(a){var t=$(".header_dropdown");t.is(a.target)||0!==t.has(a.target).length||t.hide(),$(".header_nav_btn").on("click",function(){$(".header_dropdown").toggle()})})},invoking:function(){this.btnAction()}},(appjf=appjf||{}).MonthlyAvgPrices={genChar:function(){var e,n="ca"===window.data.country?"C":"",o={labels:[],values:[]},a=window.data.monthlyAvgPrices.averages,i=0;$.each(a,function(a,t){e=a.split("/"),o.labels.push(moment(e[0],"MM").format("MMM")),o.values.push(t),i<t&&(i=t)});var t=40;200<i&&i<=500?t=60:500<i&&i<=800?t=100:800<i&&(t=160);var s=!1;("unknown"===appjf.detectIfMobile()||"desktop/laptop"===appjf.detectIfMobile()||992<=window.innerWidth)&&(s=!0),Chart.defaults.global.legend.display=!1,new Chart(document.getElementById("monthlyAvgPrices"),{type:"bar",data:{labels:o.labels,datasets:[{label:"Price",data:o.values,backgroundColor:"#aeb4bf"}]},options:{maintainAspectRatio:s,segmentShowStroke:!1,onResize:function(a){window.innerWidth<992?this.maintainAspectRatio=!1:this.maintainAspectRatio=!0},title:{display:!0,text:""},scales:{xAxes:[{gridLines:{drawBorder:!0,display:!1}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{stepSize:t,beginAtZero:!0,callback:function(a){return"percentage"===window.data.monthlyAvgPrices.mode?a+"%":n+"$ "+a}}}]},showAllTooltips:!0,tooltips:{custom:function(a){a&&(a.displayColors=!1)},callbacks:{label:function(a,t){var e="",o="";return"percentage"===window.data.monthlyAvgPrices.mode?o="%":e=n+"$ ",e+a.yLabel+o},title:function(a,t){}}}}})},invoking:function(){window.data.monthlyAvgPrices&&!$.isEmptyObject(window.data.monthlyAvgPrices.averages)&&this.genChar()}},(appjf=appjf||{}).PopularDestinations={template:function(a){var t="/fares/search/?"+("seg0_from="+a.departure_airport_code+"&seg0_to="+a.destination_airport_code+"&seg1_from="+a.destination_airport_code+"&seg1_to="+a.departure_airport_code+"&seg0_date="+a.departure_date+"&seg1_date="+a.arrival_date+"&num_adults=1&num_children=0&num_infants=0&num_infants_lap=0&seat_class=&preferred_carrier_code=&nearby_airports=0&flexible_date=0&non_penalties=0&non_stop=0&non_stop=0");$(".route-cards").append('<div class="route-card col-xs-12 col-sm-6 col-md-4" data-url="'+t+'"><strong><i class="material-icons">flight</i> '+a.departure_airport_code+" - "+a.destination_airport_code+'</strong><div class="route-card-img-wrap"><div class="route-card-effect-borders"></div><img src="/images/guides/city-adwords/lp12/600x338/'+a.destination_airport_code+'.jpg" alt=""></div><div class="route-card-info"><ul><li class="route-card-li-supplier"><img src="/images/suppliersx2/'+a.supplier_code+'x2.png"></li><li class="route-card-li-info"><strong>'+a.departure_airport_code+' <i class="material-icons"> forward </i> '+a.destination_airport_code+"</strong> "+a.departure_date+"<br><strong>"+a.destination_airport_code+' <i class="material-icons"> forward </i> '+a.departure_airport_code+"</strong> "+a.arrival_date+"<br><i>Trip duration: "+a.trip_duration+' days</i></li><li class="route-card-li-price">$'+a.best_fare+"</li></ul></div></div>")},getData:function(){if(window.data.popularDestinations){var e=this;$(".route-cards").html(""),$.each(window.data.popularDestinations,function(a,t){e.template(t)}),$(".route-card").on("click",function(){window.open($(this).data("url"),"_blank")})}},invoking:function(){window.data.popularDestinations&&$.isArray(window.data.popularDestinations)&&this.getData()}},(appjf=appjf||{}).PopularHotels={template:function(a,t,e,o,n,i,s,r,l){var p="";l<4?p="1":3<l&&l<7?p="2":6<l&&l<10?p="3":9<l&&l<13&&(p="4");var d=$("#hotel-cards-"+p),c=t+"?aid=964078;label=cheap_international_flights_seo;dest_type=city;soldout=0;soh=1&checkin_month=1&checkin_monthday=31&checkin_year="+moment().format("YYYY"),f=[];$.each(r,function(a,t){a<15&&f.push('<li><i class="glyphicon glyphicon-ok"></i> '+t.replace("_"," ").replace("_"," ").substring(0,24)+"</li>")}),f.push('<li><i class="glyphicon glyphicon-ok"></i> and more...</li>');var m=e.substring(0,35);35<e.length&&(m+="...");var u="";u+='<div class="hotel-card col-sm-6 col-md-4" data-deeplink="'+c+'" id="'+a+'"><strong><i class="material-icons">location_city</i> <span class="title-small">'+m+'</span><span class="title-big">'+e+'</span></strong><div class="hotel-card-img-wrap"><div class="hotel-card-price">$'+n+'</div><div class="route-card-effect-borders"></div><img src="'+o[0].url_original+'" alt="'+m.replace('"'," ")+'"></div><div class="hotel-card-details"><ul>'+f.join("")+'</ul></div><div class="hotel-card-map-wrap"><div class="hotel-card-address">'+s+"</div></div></div>",d.append(u),$("#"+a).on("click",function(){window.open($(this).data("deeplink"),"_blank")})},getData:function(){var e=this;$("#hotel-cards .row").empty();var a=["destination="+e.getDestination().destination_code,"check_in="+e.getDates().startDate,"check_out="+e.getDates().endDate,"num_adults=2","total_result=6"].join("&"),o=1;$.getJSON("/landing-seo/ajax-get-hotels?"+a,function(a){var t;(t=a.hotels)?($.each(t,function(a,t){e.template(t.hotel_id,t.extras[0].hotel_data.url,t.hotel_name,t.extras[0].hotel_data.hotel_photos,t.price,t.extras[0].hotel_data.location,t.extras[0].hotel_data.address,t.rooms[0].room_amenities,o),o++}),$("#hotelsloader").hide()):$("lpseo_popularhotels").hide()})},getDates:function(){var a=appjf.getObjOutOfSelectors("daterange").date,t={startDate:"",endDate:""};return appjf.getObjOutOfSelectors("daterange")?(t.startDate=a.startDate.format("YYYY-MM-DD"),t.endDate=a.endDate.format("YYYY-MM-DD")):(t.startDate=moment().add("7","day").format("YYYY-MM-DD"),t.endDate=moment().add("8","day").format("YYYY-MM-DD")),t},getDestination:function(){var a="",t={destination_code:"",destination_type:""};if(appjf.getObjOutOfSelectors("to")){var e=appjf.getObjOutOfSelectors("to");t.destination_code=e.code,t.destination_type="airport",a="Top Hotels in "+e.city+" ("+e.code+")"}else 0<window.data.popularDestinations.length?(t.destination_code=window.data.popularDestinations[0].destination_airport_code,t.destination_type="airport",a="Top Destination Hotels Of The Day ("+t.destination_code+")"):window.data.apiDealsResult&&(t.destination_code=window.data.apiDealsResult[0].destination_airport_code,t.destination_type="airport",a="Top Hotels in "+window.data.apiDealsResult[0].destination_airport_name);return $("lpseo_popularhotels h2").html(a),t},invoking:function(){this.getData()}},(appjf=appjf||{}).PriceTrend={genChar:function(){var o=this,e={labels:[],values:[]};$.each(window.data.priceTrend,function(a,t){e.values.push(t),e.labels.push(a)}),o.hiestTrendNumber=e.values[0],e.values.reverse();var a=!(o.getColor=function(a){var t,e=0!==(t=a)?Math.round(parseInt(t)/o.hiestTrendNumber*100):.1;return 90<=e?"red":e<90&&70<=e?"#a53c29":e<70&&50<=e?"#a57629":e<50&&20<=e?"#84a529":e<20&&3<=e?"#6dad2c":e<3?"#5da345":void 0});("unknown"===appjf.detectIfMobile()||"desktop/laptop"===appjf.detectIfMobile()||992<=window.innerWidth)&&(a=!0),Chart.defaults.global.legend.display=!1,new Chart(document.getElementById("priceTrend"),{type:"line",data:{labels:e.labels.reverse(),datasets:[{data:e.values,borderColor:"#aeb4bf",fill:!1}]},options:{maintainAspectRatio:a,segmentShowStroke:!1,onResize:function(a){window.innerWidth<992?this.maintainAspectRatio=!1:this.maintainAspectRatio=!0},title:{display:!0,text:""},scaleFontFamily:"'Trebuchet'",pointLabelFontFamily:"'Comic Sans'",tooltips:{bodyFontSize:15,intersect:!1,mode:"index",callbacks:{label:function(a,t){return 0<=a.yLabel?(o.priceTrendTooltipPrice=a.yLabel,a.yLabel+"% price rease"):(o.priceTrendTooltipPrice=a.yLabel,Math.abs(a.yLabel)+"% price decrease")},bodyFontFamily:"Helvetica Neue",tooltipYPadding:15,tooltipXPadding:15},custom:function(a){if(a.displayColors=!1,a.backgroundColor=o.getColor(o.priceTrendTooltipPrice),a.title&&a.title[0]){var t="day";1<a.title[0]&&(t="days"),a.title[0]=a.title[0]+" "+t+" until departure"}}},elements:{point:{hitRadius:10,hoverRadius:5,radius:0}},hover:{mode:"index",intersect:!1},scales:{xAxes:[{gridLines:{drawBorder:!0,display:!1},stacked:!0,ticks:{userCallback:function(a,t){var e=0;return t===e?a:t%(e=500<window.innerWidth?5:10)==0?a:void 0},autoSkip:!1}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{stepSize:10,callback:function(a){return a+"%"}}}]}}})},invoking:function(){window.data.priceTrend&&0<window.data.priceTrend.length&&"homeFlights"===window.data.router&&this.genChar(),window.data.priceTrend&&$.isArray(window.data.apiDealsResult)&&0<window.data.priceTrend.length&&this.genChar()}},(appjf=appjf||{}).Subscribe={sendEmail:function(){$("#submit-email-collector").on("click",function(a){a.preventDefault(),$(".spinner").fadeIn(),$(".email-collector span").remove(),$.ajax({type:"POST",url:"/home/newsletter-signup",data:{email:$(".email-collector input").val()},success:function(a){$(".email-collector span").remove(),$(".email-collector input").after(a.feedback_message),$(".spinner").toggle()}})})},invoking:function(){this.sendEmail()}},(appjf=appjf||{}).PopularRoutes={invoking:function(){$(".popularRoutesToggler").click(function(a){$(".collapse").collapse("hide")})}},(appjf=appjf||{}).Airlineslist={configs:{title:"Cheapest Major Airlines by Region",countries:{USA:{img:'<img src="/images/lpSeo/map_icons/USA.jpg" alt="Cheapest Major Airlines In USA"></div>',links:['<a href="https://www.spirit.com/" target="_blank" rel="nofollow">Spirit Airlines</a>','<a href="https://www.jetblue.com/" target="_blank" rel="nofollow">Jetblue Airways</a>','<a href="https://www.aa.com/homePage.do" target="_blank" rel="nofollow">American Airlines</a>']},Canada:{img:'<img src="/images/lpSeo/map_icons/Canada.jpg" alt="Cheapest Major Airlines In Canada">',links:['<a href="https://www.spirit.com/" target="_blank" rel="nofollow">Spirit Airlines</a>','<a href="https://www.airtransat.com/en-US/" target="_blank" rel="nofollow">Air Transat</a>','<a href="https://www.flyporter.com/en-ca/" target="_blank" rel="nofollow">Porter Airlines</a>']},"Central and South America":{img:'<img src="/images/lpSeo/map_icons/Central-and-South-America.jpg" alt="Cheapest Major Airlines In Central and South America">',links:['<a href="http://www.interjet.com/" target="_blank" rel="nofollow">Interjet</a>','<a href="https://www.volaris.com/?culture=en-US&currency=USD" target="_blank" rel="nofollow">Volaris</a>','<a href="https://www.delta.com/" target="_blank" rel="nofollow">Delta</a>']},Caribbean:{img:'<img src="/images/lpSeo/map_icons/Caribbean.jpg" alt="Cheapest Major Airlines In Caribbean">',links:['<a href="https://www.flyfrontier.com/" target="_blank" rel="nofollow">Frontier Airlines</a>','<a href="https://www.spirit.com/" target="_blank" rel="nofollow">Spirit Airlines</a>','<a href="https://aeromexico.com/" target="_blank" rel="nofollow">Aeromexico</a>']},Europe:{img:'<img src="/images/lpSeo/map_icons/Europe.jpg" alt="Cheapest Major Airlines In Europe">',links:['<a href="https://www.corsair.us/" target="_blank" rel="nofollow">Corsair</a>','<a href="https://www.norwegian.com/us/" target="_blank" rel="nofollow">Norwegian Air</a>','<a href="https://www.virginatlantic.com/" target="_blank" rel="nofollow">Virgin Atlantic</a>']},"Northern Africa":{img:'<img src="/images/lpSeo/map_icons/Northern-Africa.jpg" alt="Cheapest Major Airlines In Northern Africa">',links:['<a href="https://www.norwegian.com/us/" target="_blank" rel="nofollow">Norwegian Air</a>','<a href="https://www.aireuropa.com/" target="_blank" rel="nofollow">Air Europa</a>','<a href="https://www.aeroflot.ru/ru-en" target="_blank" rel="nofollow">Aeroflot Russian Air</a>']},"Southern Africa":{img:'<img src="/images/lpSeo/map_icons/Southern-Africa.jpg" alt="Cheapest Major Airlines In Southern Africa">',links:['<a href="https://www.virginatlantic.com/" target="_blank" rel="nofollow">Virgin Atlantic</a>','<a href="https://www.kenya-airways.com/" target="_blank" rel="nofollow">Kenya Airways</a>','<a href="https://www.swiss.com/ch/en" target="_blank" rel="nofollow">Swiss International Airlines</a>']},"Middle East":{img:'<img src="/images/lpSeo/map_icons/Middle-East.jpg" alt="Cheapest Major Airlines In Middle East">',links:['<a href="http://www.airchina.com/" target="_blank" rel="nofollow">Air China</a>','<a href="https://www.singaporeair.com/" target="_blank" rel="nofollow">Singapore Airlines</a>','<a href="https://www.norwegian.com/us/" target="_blank" rel="nofollow">Norwegian Air</a>']},"Western Asia":{img:'<img src="/images/lpSeo/map_icons/Western-Asia.jpg" alt="Cheapest Major Airlines In Western Asia">',links:['<a href="https://www.china-airlines.com/tw/en" target="_blank" rel="nofollow">China Airlines</a>','<a href="https://www.kenya-airways.com/" target="_blank" rel="nofollow">Kenya airways</a>','<a href="http://en.ceair.com/" target="_blank" rel="nofollow">China Eastern Airlines</a>']},"Eastern Asia":{img:'<img src="/images/lpSeo/map_icons/Eastern-Asia.jpg" alt="Cheapest Major Airlines In Eastern Asia">',links:['<a href="http://www.shenzhenair.com/" target="_blank" rel="nofollow">Shenzhen Airlines</a>','<a href="http://www.westair.cn/portal/en/index.html" target="_blank" rel="nofollow">China West Air</a>','<a href="https://www.xiamenair.com/" target="_blank" rel="nofollow">Xiamen Airlines</a>']},Oceania:{img:'<img src="/images/lpSeo/map_icons/Oceania.jpg" alt="Cheapest Major Airlines In Oceania">',links:['<a href="https://www.jetstar.com/au/en/home" target="_blank" rel="nofollow">Jetstar</a>','<a href="https://global.sichuanair.com/US-EN" target="_blank" rel="nofollow">Sichuan Airlines</a>','<a href="http://en.ceair.com/" target="_blank" rel="nofollow">China Eastern Airlines</a>']}}},contentConstructor:function(){var a="<h2>"+this.configs.title+"</h2>",e="";return $.each(this.configs.countries,function(a,t){e+="<dl>",e+="<dt>"+a+"<div>"+t.img+"</div></dt>",$.each(t.links,function(a,t){e+="<dd>"+t+"</dd>"}),e+="</dl>"}),a+e},template:function(){$("lpSeo_AirlinesList .container .wrapper").html(this.contentConstructor())},invoking:function(){this.template()}},(appjf=appjf||{}).lude=function(a){appjf[a].invoking()},$(document).ready(function(){appjf.lude("Header"),appjf.lude("SearchFormIndex"),appjf.lude("Subscribe"),appjf.lude("GlobalEventListener"),"homeFlights"===window.data.router&&(appjf.lude("PopularDestinationsFromIp"),appjf.lude("BestDealsOfTheDay"),appjf.lude("PopularRoutes"),appjf.lude("Airlineslist")),"homeFlights"!==window.data.router&&(appjf.lude("FlightInformation"),appjf.lude("AirlinesRatings"),appjf.lude("Deals"),appjf.lude("PopularDestinations")),appjf.lude("Footer"),$('[data-toggle="tooltip"]').tooltip(),$(document).bind("touchstart",function(a){$(".tooltip.in").tooltip("hide")}),appjf.executeComponent=function(a,t){var e=!1,o=$(a);$(window).on("load resize scroll",function(){o.isInViewport()&&!1===e&&(appjf[t].invoking(),e=!0)})},"homeFlights"===window.data.router&&appjf.executeComponent("lpseo_pricetrend","PriceTrend"),"homeFlights"!==window.data.router&&"world"!==window.data.pageDestination&&($.fn.isInViewport=function(){var a=$(this).offset().top,t=a+$(this).outerHeight(),e=$(window).scrollTop(),o=e+$(window).height();return e+100<t&&a+100<o},"flights"!==window.location.href.split("/").pop()&&(appjf.executeComponent("lpseo_pricetrend","PriceTrend"),appjf.executeComponent("lpseo_monthlyavgprices","MonthlyAvgPrices"),appjf.executeComponent("lpseo_popularhotels","PopularHotels"),appjf.executeComponent("lpseo_cartrawler","Cartrawler"))),appjf.loadLazyImagesByElem=function(o){function a(a){return $(a).isInViewport()}var n;!a(o)||"lpseo_bestdealsoftheday"!==o&&"lpseo_populardestinationsfromip"!==o&&"lpseo_crosssales"!==o&&"lpseo_cheapflightstips"!==o||a(o)&&(n=$(".lozad",$(o)),$.each(n,function(a,t){var e=$(this).data("src");$(this).attr("src",e),n.length===a+1&&$(o).css("visibility","visible")})),"lpseo_topdestinations"===o&&a(o)&&(n=$(".lozad2",$(o)),$.each(n,function(a,t){var e=$(this).data("src");$(this).css("background-image","url("+e+")"),n.length===a+1&&$(o).css("visibility","visible")})),"lpseo_informationalcomponent_0001"!==o&&"lpseo_informationalcomponent_0003"!==o||!a(o)||(n=$(".lozad2",$(o)),$.each(n,function(a,t){var e=$(this).data("src");$(this).css("background-image","url("+e+")"),n.length===a+1&&$(o).css("visibility","visible")}))};var a=["lpseo_bestdealsoftheday","lpseo_populardestinationsfromip","lpseo_crosssales","lpseo_airlineslist","lpseo_cheapflightstips","lpseo_topdestinations","lpseo_informationalcomponent_0001","lpseo_informationalcomponent_0003"];"homeFlights"===window.data.router&&(window.onload=new function(){$.each(a,function(a,t){appjf.loadLazyImagesByElem(t)})},$(window).on("resize scroll",function(){$.each(a,function(a,t){appjf.loadLazyImagesByElem(t)})}))});
